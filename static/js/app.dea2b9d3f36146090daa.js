webpackJsonp([0],{NHnr:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o("7+uW"),n={start:{a1:"欢迎来到地底迷宫，这里唯一逃脱的方式就是找到水晶炎，（用键鼠控制木条去移动寻找吧！）",a2:"撒，究竟你能不能找到它呢？~",a3:"注意不要摔倒哦~ wryyyyyyyyy"},final:{a1:"你成功的发现了水晶炎！",a2:"你使用了水晶炎！",a3:"效果拔群！",a4:"你的经验等级上升！"},timeout:{a1:"这么久还没找到，没戏了，放弃吧，die！"}},i=new THREE.AmbientLight(11184810),s=[],r={wall_material:{},init:function(){this.box(),this.maze(),this.crystal()},meshMaterial:function(e){var t=new THREE.TextureLoader,a=o("PvXa")("./"+e),n=new Physijs.createMaterial(new THREE.MeshLambertMaterial({map:t.load(a),side:THREE.DoubleSide}),.5,.8);return n.map.wrapS=n.map.wrapT=THREE.RepeatWrapping,n},box:function(){var e=this.meshMaterial("wood.jpg");e.map.repeat.set(.25,.25);var t=new THREE.BoxGeometry(2,11,2),o=new Physijs.ConvexMesh(t,e);o.position.y=80,o.position.x=0,o.castShadow=!0,o.receiveShadow=!0,o.position.set(375,6,780),s.push(o)},wall:function(e,t){var o=r.meshMaterial("wall.jpg");o.map.repeat.set(2,2);var a=new Physijs.BoxMesh(new THREE.BoxGeometry(500,10,t),o,0);return a.receiveShadow=!0,a.castShadow=!0,e?a.rotation.z=Math.PI/2:a.rotation.set(0,Math.PI/2,Math.PI/2),a.position.y=250,s.push(a),a},crystal:function(){function e(e,t,o,a,n,i,r,d,w,c){for(var u=new THREE.ExtrudeGeometry(e,t),l=0,p=u.vertices.length;l<p;l++)u.vertices[l].x*=.2,u.vertices[l].y*=.2,u.vertices[l].z*=.2;var E=new THREE.MeshNormalMaterial,y=new Physijs.ConvexMesh(u,E);y.position.set(a,n,i),y.rotation.set(r,d,w),y.castShadow=!0,y.position.set(375,20,125),s.push(y)}var t=new THREE.Shape;t.moveTo(0,.8),t.lineTo(.4,.5),t.lineTo(.3,0),t.lineTo(-.3,0),t.lineTo(-.4,.5),t.lineTo(0,.8);for(var o=0;o<1;o++){e(t,{amount:200*Math.random(),bevelEnabled:!0,bevelSegments:1,steps:1,bevelSize:10*Math.random()+10,bevelThickness:10*Math.random()+25},0,0,0,0,2*Math.random()*Math.PI,2*Math.random()*Math.PI,2*Math.random()*Math.PI)}},maze:function(){var e=this,t=this.meshMaterial("floor.png");t.map.repeat.set(12,12);var o=new Physijs.BoxMesh(new THREE.BoxGeometry(1e3,1,1e3),t,0);o.receiveShadow=!0,o.position.set(500,0,500),s.push(o),new e.wall(0,50).position.add(new THREE.Vector3(375,0,800)),new e.wall(1,200).position.add(new THREE.Vector3(350,0,700)),new e.wall(1,200).position.add(new THREE.Vector3(400,0,700)),new e.wall(0,150).position.add(new THREE.Vector3(275,0,600)),new e.wall(0,150).position.add(new THREE.Vector3(475,0,600)),new e.wall(1,600).position.add(new THREE.Vector3(550,0,300)),new e.wall(0,100).position.add(new THREE.Vector3(150,0,450)),new e.wall(1,150).position.add(new THREE.Vector3(200,0,525)),new e.wall(0,100).position.add(new THREE.Vector3(300,0,550)),new e.wall(1,100).position.add(new THREE.Vector3(350,0,500)),new e.wall(0,100).position.add(new THREE.Vector3(300,0,450)),new e.wall(1,100).position.add(new THREE.Vector3(250,0,500)),new e.wall(0,100).position.add(new THREE.Vector3(450,0,550)),new e.wall(1,100).position.add(new THREE.Vector3(500,0,500)),new e.wall(0,100).position.add(new THREE.Vector3(450,0,450)),new e.wall(1,100).position.add(new THREE.Vector3(400,0,500)),new e.wall(1,150).position.add(new THREE.Vector3(100,0,375)),new e.wall(1,100).position.add(new THREE.Vector3(150,0,350)),new e.wall(1,100).position.add(new THREE.Vector3(500,0,350)),new e.wall(0,350).position.add(new THREE.Vector3(325,0,400)),new e.wall(0,350).position.add(new THREE.Vector3(325,0,300)),new e.wall(0,100).position.add(new THREE.Vector3(50,0,300)),new e.wall(0,300).position.add(new THREE.Vector3(200,0,250)),new e.wall(0,100).position.add(new THREE.Vector3(450,0,250)),new e.wall(0,100).position.add(new THREE.Vector3(375,0,100)),new e.wall(0,250).position.add(new THREE.Vector3(175,0,50)),new e.wall(0,50).position.add(new THREE.Vector3(475,0,50)),new e.wall(1,300).position.add(new THREE.Vector3(0,0,150)),new e.wall(1,200).position.add(new THREE.Vector3(50,0,150)),new e.wall(1,150).position.add(new THREE.Vector3(350,0,175)),new e.wall(1,150).position.add(new THREE.Vector3(400,0,175)),new e.wall(1,200).position.add(new THREE.Vector3(500,0,150)),new e.wall(1,50).position.add(new THREE.Vector3(300,0,25)),new e.wall(1,50).position.add(new THREE.Vector3(450,0,25)),new e.wall(0,300).position.add(new THREE.Vector3(150,0,0)),new e.wall(0,100).position.add(new THREE.Vector3(500,0,0))}};r.init();var d,w,c,u=s;function l(){requestAnimationFrame(l),d.simulate(),c.render(d,w)}var p,E={yuusya:{},dom:{},event:[],clock:{},move_speed:.4,left:!1,right:!1,forward:!1,back:!1,move:!1,jump:!1,jump_height:0,jump_enable:!0,angelX:0,angelY:0,mouse_vector:new THREE.Vector3(0,0,0),rotate_speed:.005,init:function(){this.yuusya=u[0],this.dom=document.getElementById("canvas"),this.clock=new THREE.Clock,this.clock.start(),E.keyboard(),E.mouse(),d.addEventListener("update",E.action)},action:function(){var e=E;if(e.yuusya.__dirtyPosition=!0,e.yuusya.__dirtyRotation=!0,e.move){var t=new THREE.Vector3(0,0,0);e.forward&&(Math.abs(e.yuusya.rotation.z)>2.4?t.add(new THREE.Vector3(-Math.sin(Math.PI-e.yuusya.rotation.y)*e.move_speed,0,-Math.cos(Math.PI-e.yuusya.rotation.y)*e.move_speed)):t.add(new THREE.Vector3(-Math.sin(e.yuusya.rotation.y)*e.move_speed,0,-Math.cos(e.yuusya.rotation.y)*e.move_speed))),e.left&&(Math.abs(e.yuusya.rotation.z)>2.4?t.sub(new THREE.Vector3(-Math.sin(-e.yuusya.rotation.y+Math.PI/2)*e.move_speed,0,-Math.cos(-e.yuusya.rotation.y+Math.PI/2)*e.move_speed)):t.add(new THREE.Vector3(-Math.sin(e.yuusya.rotation.y+Math.PI/2)*e.move_speed,0,-Math.cos(e.yuusya.rotation.y+Math.PI/2)*e.move_speed))),e.right&&(Math.abs(e.yuusya.rotation.z)>2.4?t.sub(new THREE.Vector3(-Math.sin(-e.yuusya.rotation.y+Math.PI/2*3)*e.move_speed,0,-Math.cos(-e.yuusya.rotation.y+Math.PI/2*3)*e.move_speed)):t.add(new THREE.Vector3(-Math.sin(e.yuusya.rotation.y-Math.PI/2)*e.move_speed,0,-Math.cos(e.yuusya.rotation.y-Math.PI/2)*e.move_speed))),e.back&&(Math.abs(e.yuusya.rotation.z)>2.4?t.add(new THREE.Vector3(Math.sin(Math.PI-e.yuusya.rotation.y)*e.move_speed,0,Math.cos(Math.PI-e.yuusya.rotation.y)*e.move_speed)):t.add(new THREE.Vector3(Math.sin(e.yuusya.rotation.y)*e.move_speed,0,Math.cos(e.yuusya.rotation.y)*e.move_speed))),e.yuusya.position.add(t)}e.mouse_vector.x>.9?e.yuusya.rotateOnAxis(new THREE.Vector3(0,-1,0),6*e.rotate_speed):e.mouse_vector.x<-.9&&e.yuusya.rotateOnAxis(new THREE.Vector3(0,1,0),6*e.rotate_speed),e.mouse_vector.y>.9&&w.rotation.x<Math.PI/4?w.rotateOnAxis(new THREE.Vector3(1,0,0),6*e.rotate_speed):e.mouse_vector.y<-.9&&w.rotation.x>-Math.PI/6&&w.rotateOnAxis(new THREE.Vector3(-1,0,0),6*e.rotate_speed),e.jump&&(e.jump_height+=.1,e.jump_height<3?e.yuusya.position.y+=.15:e.jump_height>6.5&&(e.jump=!1,e.jump_enable=!0,e.jump_height=0)),!p.start&&e.yuusya.position.z>700&&e.yuusya.position.z<750&&e.yuusya.position.x<400&&e.yuusya.position.x>350&&p.kaiwa("start"),!p.final&&e.yuusya.position.z<250&&e.yuusya.position.x<400&&e.yuusya.position.x>350&&p.kaiwa("final"),!p.timeout&&e.clock.getElapsedTime()>160&&p.kaiwa("timeout")},keyboard:function(){var e=this;e.event[0]=function(t){switch(t.keyCode){case 65:e.left=!0;break;case 87:e.forward=!0;break;case 68:e.right=!0;break;case 83:e.back=!0;break;case 32:e.jump_enable&&(e.jump=!0,e.jump_enable=!1)}(e.left||e.forward||e.right||e.back)&&(e.move=!0)},e.dom.addEventListener("keydown",e.event[0]),e.event[1]=function(t){switch(t.keyCode){case 65:e.left=!1;break;case 87:e.forward=!1;break;case 68:e.right=!1;break;case 83:e.back=!1}e.left||e.forward||e.right||e.back||(e.move=!1)},e.dom.addEventListener("keyup",e.event[1])},mouse:function(){var e=this;e.dom.addEventListener("mousemove",function(t){e.yuusya.__dirtyPosition=!0,e.yuusya.__dirtyRotation=!0;var o=new THREE.Vector3(t.clientX/e.dom.clientWidth*2-1,-(t.clientY/e.dom.clientHeight*2-1),0);o.x>e.mouse_vector.x&&Math.abs(o.x)<=.9?e.yuusya.rotateOnAxis(new THREE.Vector3(0,-1,0),e.rotate_speed):o.x<e.mouse_vector.x&&Math.abs(o.x)<=.9&&e.yuusya.rotateOnAxis(new THREE.Vector3(0,1,0),e.rotate_speed),o.y>e.mouse_vector.y&&w.rotation.x<Math.PI/4?w.rotateOnAxis(new THREE.Vector3(1,0,0),e.rotate_speed):o.y<e.mouse_vector.y&&w.rotation.x>-Math.PI/6&&w.rotateOnAxis(new THREE.Vector3(-1,0,0),e.rotate_speed),e.mouse_vector=o})}},y=function(e){!function(){(d=new Physijs.Scene).setGravity(new THREE.Vector3(0,-30,0)),(c=new THREE.WebGLRenderer({canvas:document.getElementById("canvas")})).setSize(window.innerWidth,window.innerHeight),c.shadowMap.enabled=!0,c.shadowMap.type=THREE.PCFSoftShadowMap,d.add(i);for(var e=0;e<u.length;e++)d.add(u[e]);(w=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,1,1e3)).position.add(new THREE.Vector3(0,10,15)),u[0].add(w)}(),l(),p=e,E.init()},h={data:function(){return{text:"",drama:{}}},mounted:function(){y(this)},methods:{kaiwa:function(e){this.drama=n[e],this.Even(1),this[e]=!0},Even:function(e){var t=this,o=t.drama["a"+e];t.text="";var a=setInterval(function(){o?(t.text+=o.slice(0,1),o=o.slice(1)):t.drama["a"+(e+1)]?(clearInterval(a),setTimeout(function(){t.Even(e+1)},1e3)):(clearInterval(a),setTimeout(function(){t.text=""},1e3))},100)}}},m={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("section",{directives:[{name:"show",rawName:"v-show",value:this.text,expression:"text"}]},[this._v(this._s(this.text))]),this._v(" "),t("canvas",{attrs:{tabindex:"0",id:"canvas"}})])},staticRenderFns:[]};var v=o("VU/8")(h,m,!1,function(e){o("fgm5")},null,null).exports;a.a.config.productionTip=!1,new a.a({el:"#app",template:"<App/>",components:{App:v}})},PvXa:function(e,t,o){var a={"./floor.png":"maRJ","./wall.jpg":"VNaJ","./white.png":"p1XC","./wood.jpg":"mUT+"};function n(e){return o(i(e))}function i(e){var t=a[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}n.keys=function(){return Object.keys(a)},n.resolve=i,e.exports=n,n.id="PvXa"},VNaJ:function(e,t,o){e.exports=o.p+"static/img/wall.f1f918d.jpg"},fgm5:function(e,t){},"mUT+":function(e,t,o){e.exports=o.p+"static/img/wood.c9589cb.jpg"},maRJ:function(e,t,o){e.exports=o.p+"static/img/floor.2055625.png"},p1XC:function(e,t,o){e.exports=o.p+"static/img/white.0080026.png"}},["NHnr"]);
//# sourceMappingURL=app.dea2b9d3f36146090daa.js.map